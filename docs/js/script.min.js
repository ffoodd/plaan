"use strict";!function(){var a=document.getElementById("plan"),r=document.getElementById("settings");document.addEventListener("DOMContentLoaded",function(){main.style.setProperty("--rows",4),main.style.setProperty("--cols",7);var t=document.createRange().createContextualFragment('\n\t\t\t<button type="button" class="no-margin">\n          <span aria-hidden="true">&#9881;</span>&nbsp;Réglages\n        </button>\n        <form>\n          <div class="grid-2">\n            <a download="plaan.json" class="no-margin">Exporter</a>\n            <p class="no-margin">\n              <label for="import">Importer</label>\n              <input id="import" name="import" type="file" accept="json" class="sr-only"/>\n            </p>\n          </div>\n          <input id="reset" name="reset" type="reset" value="Annuler les modifications"/>\n        </form>');r.append(t);var l=document.querySelector("[download]"),e=document.querySelector('[type="file"]'),n=document.querySelector('[type="reset"]'),o=new Event("change",{bubbles:!0});localStorage.length&&(l.href="data:text/json,["+JSON.stringify(localStorage)+"]"),a.querySelectorAll("[style]").forEach(function(c){var n=c.textContent,t=c.style.getPropertyValue("--x"),e=c.style.getPropertyValue("--y"),a=function(t,e,n){var a=t.toLowerCase().replace(" ","-"),o='\n      <div class="table">\n        <button type="button" class="arrows" data-controls="'.concat(a,'">\n          <span class="sr-only">Utilisez les flèches pour déplacer ').concat(t,"</span>\n        </button>\n        <h2>").concat(t,'</h2>\n        <button type="button" data-controls="').concat(a,'-y" data-step="down"\n                class="↑" aria-label="Monter" tabindex="-1">↑</button>\n        <button type="button" data-controls="').concat(a,'-y" data-step="up"\n                class="↓" aria-label="Descendre" tabindex="-1">↓</button>\n        <button type="button" data-controls="').concat(a,'-x" data-step="up"\n                class="→" aria-label="Décaler à droite" tabindex="-1">→</button>\n        <button type="button" data-controls="').concat(a,'-x" data-step="down"\n                class="←" aria-label="Décaler à gauche" tabindex="-1">←</button>\n      </div>\n      <form class="sr-only">\n        <p>\n          <label for="').concat(a,'-y">Ligne</label>\n          <input type="number" step="1" min="1" max="').concat(4,'" value="').concat(n,'"\n                 tabindex="-1" data-key="').concat(a,'" id="').concat(a,'-y"/>\n        </p>\n        <p>\n          <label for="').concat(a,'-x">Colonne</label>\n          <input type="number" step="1" min="1" max="').concat(7,'" value="').concat(e,'"\n                tabindex="-1" data-key="').concat(a,'" id="').concat(a,'-x"/>\n        </p>\n      </form>');return document.createRange().createContextualFragment(o)}(n,t,e);c.innerHTML="",c.append(a),c.querySelectorAll('[type="number"]').forEach(function(t){var a=t.dataset.key,o=4===Number(t.getAttribute("max"))?"y":"x",e=localStorage.getItem(a),r={name:n};null!==e&&void 0!==(r=JSON.parse(e))[o]&&(c.style.setProperty("--".concat(o),r[o]),t.value=r[o]),t.addEventListener("change",function(t){var e=t.target.value,n=localStorage.getItem(a);null!==n&&(r=JSON.parse(n)),r[o]=e,c.style.setProperty("--".concat(o),e),localStorage.setItem(a,JSON.stringify(r)),l.href="data:text/json,["+JSON.stringify(localStorage)+"]"},!1)}),c.querySelectorAll("[data-step]").forEach(function(t){var e=t.dataset.controls,n=t.dataset.step,a=document.getElementById(e);t.addEventListener("click",function(){switch(n){case"up":a.stepUp(),a.dispatchEvent(o);break;case"down":a.stepDown(),a.dispatchEvent(o)}},!1)}),c.querySelectorAll(".arrows").forEach(function(t){var e=t.dataset.controls,n=document.getElementById("".concat(e,"-y")),a=document.getElementById("".concat(e,"-x"));t.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":a.stepDown(),a.dispatchEvent(o);break;case"ArrowUp":n.stepDown(),n.dispatchEvent(o);break;case"ArrowRight":a.stepUp(),a.dispatchEvent(o);break;case"ArrowDown":n.stepUp(),n.dispatchEvent(o)}},!1)})}),e.addEventListener("change",function(t){var e=t.target.files[0],n=new FileReader;n.onload=function(t){JSON.parse(t.target.result,function(t,e){localStorage.removeItem(t);var n=JSON.parse(e),a=document.querySelector('[data-controls="'.concat(t,'"]')),o=document.getElementById("".concat(t,"-y")),r=document.getElementById("".concat(t,"-x")),c=a.closest("li");void 0!==n.y&&(c.style.setProperty("--y",n.y),o.value=n.y),void 0!==n.x&&(c.style.setProperty("--x",n.x),r.value=n.x),localStorage.setItem(t,e)})},n.readAsText(e)}),n.addEventListener("click",function(){localStorage.clear(),document.location.reload()})})}();